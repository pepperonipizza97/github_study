<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <select name="" id="selDrinkType" class="">
      <!-- <option>이온음료</option>
      <option>커피</option>
      <option>탄산</option> -->
    </select>
    <button onclick="doSearch()">조회</button>
    <table>
      <thead>
        <th>음료</th>
        <th>가격</th>
      </thead>
      <tbody id="tbody"></tbody>
    </table>
    <script>
      let brands = ["애플", "구글", "아마존", "마소", "메타"];
      // toString()
      console.log(brands.toString());
      console.log(brands.toString().split(","));

      let str = "애플, 구글, 아마존, 마소, 메타";
      console.log(str.split(","));

      // join()
      // 파라미터로 전달된 문자가 요소 사이 마다 삽입이 되어서 하나의 문자열로 결합
      console.log(brands.join("*"));
      let test = brands.join("*");
      console.log(test);
      console.log(test.split("*"));

      function doSearch() {
        // console.log("doSearch called");
        const drinkList = [
          {
            name: "오렌지",
            price: 1000,
          },
          {
            name: "파워에이드",
            price: 1200,
          },
          {
            name: "커피",
            price: 700,
          },
          {
            name: "보리차",
            price: 1200,
          },
          {
            name: "코카콜라",
            price: 1000,
          },
        ];
        //     let trTags = "";
        //     for (const drink of drinkList) {
        //       trTags += "<tr>";
        //       trTags += "<td>" + drink.name + "</td>";
        //       trTags += "<td>" + drink.price + "</td>";
        //       trTags += "</tr>";
        //     }
        //     console.log(trTags);
        //     document.getElementById("tbody").innerHTML = trTags;
        //   }
        let trTags = [];
        for (const drink of drinkList) {
          trTags.push("<tr>");
          trTags.push("<td>" + drink.name + "</td>");
          trTags.push("<td>" + drink.price + "</td>");
          trTags.push("</tr>");
        }
        // console.log(trTags)
        document.getElementById("tbody").innerHTML = trTags.join("");
      }

      // pop() : 배열에서 마지막 요소를 제거하고, 그 마지막 요소를 반환
      console.log(brands);
      console.log(brands.pop());
      console.log(brands);

      brands.push("테슬라");
      console.log(brands);

      // shift()  - 배열에서 첫 번째 요소를 제거하면서 그 요소를 반환
      let val = null;
      val = brands.shift();

      console.log(val);
      console.log(brands);

      // unshift() - 배열의 제일 앞에 요소를 추가하고, 배열의 길이 반환
      brands.unshift(val);
      console.log(brands);

      function loadDrinkType() {
        const types = [
          { text: "이온음료", code: "A" },
          { text: "커피", code: "B" },
          { text: "탄산음료", code: "C" },
        ];

        const h = [];
        for (const type of types) {
          h.push(
            '<option value=" ' + type.code + '">' + type.text + "</option>"
          );
        }
        return h;
      }

      const selDrinkType = loadDrinkType();
      console.log(selDrinkType);
      selDrinkType.unshift('<option value=""></option>');
      document.getElementById("selDrinkType").innerHTML = selDrinkType.join("");

      // splice() - 배열의 특정 위치에 새로운 요소를 추가, 추가할 때 기존 요소 삭제하면서 추가 할 수 있다.
      // 첫번째 파라미터 - 새로운 요소를 추가할 인덱스 번호
      // 두번째 파라미터 - 요소를 추가하기 전에 삭제할 요소 수
      // 나머지 파라미터 - 추가할 요소
      console.log(brands);
      brands.splice(1, 0, "꾸준히", "될 때 까지");
      console.log(brands);
      brands.splice(1, 2, "광인사");
      console.log(brands);
      brands.splice(4, 1, "박웅근");
      console.log(brands);

      // concat() - 2개 이상의 배열을 하나의 배열로 결합
      let arr1 = ["A", "B"];
      let arr2 = ["C", "D"];
      let arr3 = ["E", "F", "G"];
      let arr4 = ["H", "I", "J"];
      let arr5 = arr1.concat(arr2, arr3);
      console.log(arr5);
      let arr6 = arr1.concat(arr2, arr3, arr4);
      console.log(arr6);
      let arr7 = [...arr1, ...arr2, ...arr3];
      console.log(arr7);
      let arr8 = [arr1, arr2, arr3];
      console.log(arr8);

      // sort() = 배열의 요소를 정렬해 주는 함수
      console.log(brands);
      console.log(brands.sort());

      let points = [40, 100, 1, 5, 25, 10];
      console.log(points.sort());

      const ascPoints = points.sort(function (a, b) {
        (a = 40), (b = 100);
        [40, 100, 100, 1, 5, 25, 10];
        (a = 100), (b = 1);
        [40, 1, 100, 5, 25, 10];

        return a - b;
      });
      console.log(ascPoints);

      const drinkList = [
        {
          name: "오렌지",
          price: 1000,
        },
        {
          name: "파워에이드",
          price: 1200,
        },
        {
          name: "커피",
          price: 700,
        },
        {
          name: "보리차",
          price: 1200,
        },
        {
          name: "코카콜라",
          price: 1000,
        },
      ];
      const drinkList1 = [
        {
          name: "오렌지",
          price: 1000,
        },
        {
          name: "파워에이드",
          price: 1200,
        },
        {
          name: "커피",
          price: 700,
        },
        {
          name: "보리차",
          price: 1200,
        },
        {
          name: "코카콜라",
          price: 1000,
        },
      ];
      //   const ascDrinklist = drinkList.sort(function (a, b) {
      //     return a.price >b.price ? 1 : -1 ;
      //   });
      //   console.log(ascDrinklist);

      //   const ascDrinklist1 = drinkList1.sort(function (a, b) {
      //     return a.name > b.name ? 1 : -1;
      //   });
      //   console.log(ascDrinklist1);

      const userSortKey = "name";
      const ascDrinklist2 = drinkList.sort(function (a, b) {
        return a[userSortKey] > b[userSortKey] ? 1 : -1;
      });
      console.log(ascDrinklist2);

      // filter -- 배열에서 특정 조건에 맞는 요소만 찾아서 새로운 배열로 반환
      let availableProduct = [];
      const inputCoin = 1300;

      //   for(const drink of drinkList1){
      //     if(drink.price <= inputCoin){
      //         availableProduct.push(drink);
      //     }
      //   }
      //   console.log(availableProduct)

      availableProduct = drinkList.filter(function (drink) {
        return drink.price <= inputCoin;
      });
      console.log(availableProduct);

      // map() - 배열이 가지고 있는 요소의 오브젝트 경우
      // 오브젝트가 가지고 있는 key-value쌍이 있는
      // 새로운 오브젝트 형태로 변경해서 새로운 배열을 반환
      let userList = [
        {
          firstName: "재석",
          lastName: "유",
          email: "ryu@gmail.com",
        },
        {
          firstName: "중국",
          lastName: "김",
          email: "kim@gmail.com",
        },
        {
          firstName: "지효",
          lastName: "송",
          email: "song @gmail.com",
        },
      ];

      newUserList = userList.map(function (user) {
        return {
          fullname: user.lastName + user.firstName,
          email: user.email,
        };
      });
      console.log(newUserList);

      // reduce()
      // 첫번째 accumulator - 누적값
      // 두번째 currentValue - 현재 배열요소
      // 세번째 currentIndex - 현재 배열 인덱스 번호
      // 네번째 arr - 전체 배열
      points = [40, 100, 1, 5, 25, 10];
      let sum = 0;

      for (let val of points) {
        sum = sum + val;
      }
      console.log(sum);
      console.log("=========================================");

      sum = points.reduce(function (acc, curval) {
        return acc + curval;
      }, 0);
      console.log(sum);
      console.log("=======================================");

      function my_reduce(arr, func, init) {
        for (let val of arr) {
          init = func(init, val);
        }
        return init;
      }

      const f = function (acc, curval) {
        // console.log(acc, curval);
        return acc + curval;
      }
      let sum1 = my_reduce(points,f ,0)
      console.log(sum1);
    </script>
  </body>
</html>
